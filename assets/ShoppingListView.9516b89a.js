import{u as C,r as f,c as b,a as O,S as y,b as g,d as v,e as S,f as I,F as P,g as w,h as s,o as d,n as A,t as E,i as T,T as G,_ as N,I as x,j as H,k as R,l as U}from"./index.82c12c53.js";const V=l=>{const t=O(),{t:u}=C(),c=u("somethingWentWrong"),i=f(!1),o=f(null),a=b(()=>t.getters[y.ACTIVE_SHOPPING_LIST]),r=b(()=>t.getters[y.HAS_PRODUCTS]),n=async p=>{i.value=!0;try{await t.dispatch(g.LOAD_SHOPPING_LIST,p)}catch(h){const e=h;o.value=(e==null?void 0:e.message)||c}finally{i.value=!1}};return{handleDelete:async p=>{try{await t.dispatch(g.DELETE_PRODUCT_FROM_SHOPPING_LIST,{shoppingListKey:l,itemKey:p})}catch(h){const e=h;o.value=(e==null?void 0:e.message)||c}},handleError:()=>{o.value=null},handleSelect:async(p,h)=>{try{await t.dispatch(g.TOGGLE_PRODUCT_STATUS,{shoppingListKey:l,itemKey:p,status:h})}catch(e){const L=e;o.value=(L==null?void 0:L.message)||c}},handleSubmit:async p=>{try{await t.dispatch(g.ADD_PRODUCT_TO_SHOPPING_LIST,{name:p,shoppingListKey:l})}catch(h){const e=h;o.value=(e==null?void 0:e.message)||c}n(l)},error:o,isLoading:i,loadActiveShoppingList:n,shoppingList:a,shouldShowTable:r}},B=["onClick"],F=v({__name:"ShoppingListTable",props:{shoppingList:null},emits:["deleteItem","selectItem"],setup(l,{emit:t}){const u=l,c=b(()=>u.shoppingList),i=(a,r)=>{t("selectItem",a,r)},o=a=>{t("deleteItem",a)};return(a,r)=>(d(),S("section",null,[I("table",null,[I("tbody",null,[(d(!0),S(P,null,w(s(c).items,n=>(d(),S("tr",{key:n.key},[I("td",{class:A(["clickable",{"product--bought":n.bought}]),onClick:_=>i(n.key,!n.bought)},E(n.product),11,B),T(G,{onClick:_=>o(n.key)},null,8,["onClick"])]))),128))])])]))}});const W=N(F,[["__scopeId","data-v-177dfeff"]]),K=v({__name:"ShoppingListView",props:{id:null},setup(l){const t=l,{handleDelete:u,handleError:c,handleSelect:i,handleSubmit:o,error:a,isLoading:r,loadActiveShoppingList:n,shoppingList:_,shouldShowTable:m}=V(t.id);return n(t.id),(D,k)=>(d(),S("div",null,[T(x,{onSubmit:s(o),label:"productInputLabel"},null,8,["onSubmit"]),T(H,{"card-text":"emptyShoppingList",error:s(a),"is-loading":s(r),"should-show-table":s(m),"handle-error":s(c)},null,8,["error","is-loading","should-show-table","handle-error"]),!s(r)&&!s(a)&&s(m)?(d(),R(W,{key:0,shoppingList:s(_),onDeleteItem:s(u),onSelectItem:s(i)},null,8,["shoppingList","onDeleteItem","onSelectItem"])):U("",!0)]))}});export{K as default};
